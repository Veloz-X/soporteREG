(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{115:function(t,e,s){"use strict";s.r(e);var a=s(6),i=s.n(a),n=s(160);a={data:function(){return{usersList:[],isACModalVisible:!1,userToDelete:null,userToUpdate:null,userModal:"create",isLoading:!1}},components:{userModal:n.a},mounted:function(){var t=this;this.isLoading=!0,i.a.post(this.$myaccount_url+"customers/list").then((function(e){t.isLoading=!1,e=e.data.data,t.usersList=t.usersList.concat(e)}))},methods:{recordUpdated:function(t){var e=t.data.data;t=this.usersList.findIndex((function(t){return t.id===e.id}));this.usersList.splice(t,1,e)},recordAdded:function(t){this.usersList.unshift(t.data.data)},deleteUser:function(t){var e=this;this.userToDelete=t,this.$modal.show("dialog",{title:this.$t("Delete confirm"),text:'<span class="text-danger font-weight-bold">Are you sure you want to delete this user account? <br />this action will permanently delete the account and all data associated with it.</span>',buttons:[{title:'<span class="text-danger font-weight">Permanently delete</span>',handler:function(){e.doDeleteUser(),e.$modal.hide("dialog")}},{title:"Close"}]})},doDeleteUser:function(){var t=this;this.isACModalVisible=!1,i.a.post(this.$myaccount_url+"customers/user/delete",{_method:"delete",user_id:this.userToDelete.id}).then((function(e){e&&(e=t.usersList.findIndex((function(e){return e===t.userToDelete})),t.$delete(t.usersList,e)),t.userToDelete=null})).catch((function(t){console.log("Error: ",t.message)}))},closeModal:function(){this.isACModalVisible=!1},edit:function(t){var e=this;this.$modal.show(n.a,{userid:t,method:"update",handlers:{update:function(t){e.recordUpdated(t)}}})},addNew:function(){var t=this;this.$modal.show(n.a,{method:"create",handlers:{update:function(e){t.recordAdded(e)}}})}}},s=s(131),a=Object(s.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"d-flex justify-content-end options mb-3"},[s("button",{staticClass:"btn btn-sm btn-primary shadow-sm float-right mx-1",on:{click:t.addNew}},[s("i",{staticClass:"fas fa-plus fa-sm text-white-50"}),t._v(" "+t._s(t.$t("New"))+"\r\n    ")])]),t._v(" "),t.isLoading?s("pre-loader"):s("div",[t.usersList.length?s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-striped table-sm table-centered mb-2 border bg-white"},[s("thead",[s("tr",[s("th",[t._v(t._s(t.$t("Name")))]),t._v(" "),s("th",[t._v(t._s(t.$t("E-mail")))]),t._v(" "),s("th",[t._v(t._s(t.$t("language")))]),t._v(" "),s("th",[t._v(t._s(t.$t("Tickets")))]),t._v(" "),s("th",[t._v(t._s(t.$t("Last login")))]),t._v(" "),s("th")])]),t._v(" "),s("tbody",t._l(t.usersList,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"table-user"},[s("img",{staticClass:"mr-2 rounded-circle",attrs:{src:e.avatar,alt:e.name,width:"32"}}),t._v("\r\n                    "+t._s(e.name)+"\r\n                ")]),t._v(" "),s("td",[e.email_verified?s("i",{staticClass:"fas fa-check text-success"}):s("i",{staticClass:"fas fa-times text-danger"}),t._v(" "+t._s(e.email))]),t._v(" "),s("td",[t._v(t._s(e.language))]),t._v(" "),s("td",[t._v(t._s(e.total_tickets))]),t._v(" "),s("td",[t._v(t._s(e.last_login_at))]),t._v(" "),s("td",{staticClass:"table-action"},[s("button",{staticClass:"btn btn-sm btn-danger btn-icon-split",on:{click:function(s){return t.deleteUser(e)}}},[s("span",{staticClass:"icon text-white-50",attrs:{"data-toggle":"tooltip","data-placement":"top",title:t.$t("Delete")}},[s("i",{staticClass:"fas fa-trash"})])]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-primary btn-icon-split",attrs:{"data-toggle":"modal","data-target":"#userModal"},on:{click:function(s){return t.edit(e.id)}}},[s("span",{staticClass:"icon text-white-50",attrs:{"data-toggle":"tooltip","data-placement":"top",title:t.$t("Edit")}},[s("i",{staticClass:"fas fa-user-edit"})])]),t._v(" "),s("a",{staticClass:"btn btn-sm btn-secondary btn-icon-split",attrs:{href:t.$myaccount_url+"customers/"+e.id}},[s("span",{staticClass:"icon text-white-50",attrs:{"data-toggle":"tooltip","data-placement":"top",title:t.$t("View")}},[s("i",{staticClass:"fas fa-eye"})])])])])})),0)])]):s("empty-state",{attrs:{text:"No customers yet"}})],1),t._v(" "),s("v-dialog")],1)}),[],!1,null,null,null);e.default=a.exports}}]);