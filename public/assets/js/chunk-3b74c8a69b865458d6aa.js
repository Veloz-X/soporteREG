(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{129:function(t,e,n){"use strict";n.r(e);var o=n(6),r=n.n(o);o=n(145),o=n.n(o);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n(146),o={data:function(){return{listCategories:[],isSaving:!1,selectedCategory:null,selectedSubCategory:null,title:null,priority:null,ticketContent:null,attachments:[],custom_fields:{},dropzoneOptions:{url:this.$myaccount_url+"upload?type=ticket_attachment",thumbnailWidth:128,thumbnailHeight:128,maxFilesize:4,acceptedFiles:".jpg,.jpeg,.png,.pdf,.doc, .docx",maxFiles:5,resizeWidth:1080,resizeQuality:.6,addRemoveLinks:!0,dictDefaultMessage:this.$t("drop_files_here_to_upload"),dictRemoveFile:this.$t("X"),dictUploadCanceled:this.$t("upload_canceled"),dictCancelUploadConfirmation:this.$t("are_you_sure_want_to_cancel_upload"),dictRemoveFileConfirmation:this.$t("are_you_sure_want_to_remove_this_file"),headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}}},components:{vueDropzone:o.a},methods:{submit:function(){var t=this;if(this.$toasted.clear(),null==this.title)return this.$toasted.global.error(this.$t("Title can not be empty, Please type your ticket title")),!1;if(null==this.selectedCategory&&null==this.selectedSubCategory)return this.$toasted.global.error(this.$t("Please select a category")),!1;if(null==this.ticketContent)return this.$toasted.global.error(this.$t("Ticket content can not be empty, Please type your ticket content")),!1;var e=this.attachments.map((function(t){return t.fpath}));this.isSaving=!0,r.a.post(this.$myaccount_url+"tickets/save",{title:this.title,content:this.ticketContent,priority:this.priority,custom_fields:this.custom_fields,attachments:JSON.stringify(e),category:(this.selectedSubCategory||this.selectedCategory).id}).then((function(e){"ok"==e.data.status?(t.$toasted.global.success(e.data.message),window.location.replace(t.$myaccount_url+"tickets/"+e.data.id)):e.data.status&&"fail"==e.data.status?Array.isArray(e.data.message)||"object"===i(e.data.message)?t.$toasted.global.error(Object.values(e.data.message).join("<br />")):t.$toasted.global.error(e.data.message):t.$toasted.global.error("Failed to submit your ticket, Please try again.")})).then((function(){t.isSaving=!1}))},checkUploadedFile:function(t,e){var n;e.status&&"ok"==e.status?(n=t.upload.uuid,t=e.data.path,this.attachments.push({fid:n,fpath:t})):e.status&&"fail"==e.status?(e=Object.values(e.messages),this.$toasted.global.error(e.join("<br />"))):this.$toasted.global.error(this.$t("Failed to upload your attachment please try again"))},removeImage:function(t){var e=this.attachments.findIndex((function(e){return e.fid==t.upload.uuid}));-1!=e&&this.attachments.splice(e,1)},failed:function(t,e,n){this.$showError(e),t.previewElement.querySelectorAll(".dz-error-message span")[0].textContent=this.$t("File upload failed")}},mounted:function(){var t=this;r.a.post(this.$myaccount_url+"tickets/categories").then((function(e){t.listCategories=e.data}))},computed:{parentCategories:function(){return this.listCategories.filter((function(t){return!t.parent_id}))},childCategories:function(){var t=this;return t.selectedCategory?t.listCategories.filter((function(e){return e.parent_id===t.selectedCategory.id})):[]}},watch:{selectedCategory:function(){this.selectedSubCategory=null}}},n=n(131),o=Object(n.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control",attrs:{type:"text",id:"ticket-title","aria-describedby":"ticket-titleHelp",placeholder:t.$t("ticket_subject")},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),n("small",{staticClass:"form-text text-muted",attrs:{id:"ticket-titleHelp"}})]),t._v(" "),n("div",{staticClass:"form-group text-capitalize"},[n("v-select",{attrs:{placeholder:t.$t("Choose a category"),label:"name",options:t.parentCategories},scopedSlots:t._u([{key:"option",fn:function(e){return[e.thumbnail?n("img",{attrs:{src:e.thumbnail,width:"20",height:"20"}}):n("i",{staticClass:"far fa-folder fa-lg"}),t._v("\n        "+t._s(e.name)+"\n      ")]}}]),model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}})],1),t._v(" "),t.childCategories.length?n("div",{staticClass:"form-group text-capitalize"},[n("v-select",{attrs:{placeholder:t.$t("Choose a sub category"),label:"name",options:t.childCategories},scopedSlots:t._u([{key:"option",fn:function(e){return[e.thumbnail?n("img",{attrs:{src:e.thumbnail,width:"20",height:"20"}}):n("i",{staticClass:"far fa-folder fa-lg"}),t._v("\n        "+t._s(e.name)+"\n      ")]}}],null,!1,2004713805),model:{value:t.selectedSubCategory,callback:function(e){t.selectedSubCategory=e},expression:"selectedSubCategory"}})],1):t._e(),t._v(" "),n("div",{staticClass:"form-group"},[n("v-select",{staticClass:"text-capitalize",attrs:{placeholder:t.$t("Priority"),label:"name",options:["low","medium","high","urgent"]},model:{value:t.priority,callback:function(e){t.priority=e},expression:"priority"}})],1),t._v(" "),n("div",{staticClass:"form-group"},[n("text-editor",{attrs:{uploadtype:"ticket",placeholder:t.$t("How can we help you today?")+"..."},model:{value:t.ticketContent,callback:function(e){t.ticketContent=e},expression:"ticketContent"}})],1),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"text-capitalize",attrs:{id:"panelDropzone"}},[t._v(t._s(t.$t("Attachments")))]),t._v(" "),n("vueDropzone",{ref:"panelDropzone",attrs:{id:"panelDropzone",options:t.dropzoneOptions,useCustomSlot:!0},on:{"vdropzone-max-files-exceeded":function(e){t.$toasted.global.error(t.$t("Too many attachments"))},"vdropzone-error":t.failed,"vdropzone-success":t.checkUploadedFile,"vdropzone-removed-file":t.removeImage}},[n("div",{staticClass:"dropzone-custom-content"},[n("h3",{staticClass:"dropzone-custom-title"},[t._v(t._s(t.$t("drop_files_upload")))]),t._v(" "),n("div",{staticClass:"subtitle"},[t._v(t._s(t.$t("click_select_file")))]),t._v(" "),n("small",{staticClass:"small"},[t._v(t._s(t.$t("file_allowed_image_pdf__doc")))])])])],1),t._v(" "),n("div",{staticClass:"form-group"},[n("save-btn",{staticClass:"btn btn-outline-primary float-right mt-3",attrs:{text:"Submit ticket",inAction:t.isSaving},nativeOn:{click:function(e){return t.submit()}}})],1)])}),[],!1,null,null,null),e.default=o.exports},131:function(t,e,n){"use strict";function o(t,e,n,o,r,i,a,s){var l,c,u="function"==typeof t?t.options:t;return e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),o&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),a?u._ssrRegister=l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)}:r&&(l=s?function(){r.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:r),l&&(u.functional?(u._injectStyles=l,c=u.render,u.render=function(t,e){return l.call(e),c(t,e)}):(s=u.beforeCreate,u.beforeCreate=s?[].concat(s,l):[l])),{exports:t,options:u}}n.d(e,"a",(function(){return o}))},132:function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",o=t[3];return o?e&&"function"==typeof btoa?(t=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(o),e=o.sources.map((function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"})),[n].concat(e).concat([t]).join("\n")):[n].join("\n"):n}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<t.length;r++){var a=t[r];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},133:function(t,e,n){var o,r,i,a={},s=(o=function(){return window&&document&&document.all&&!window.atob},function(){return r=void 0===r?o.apply(this,arguments):r}),l=(i={},function(t,e){if("function"==typeof t)return t();if(void 0===i[t]){if(e=function(t,e){return(e||document).querySelector(t)}.call(this,t,e),window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}i[t]=e}return i[t]}),c=null,u=0,d=[],f=n(134);function p(t,e){for(var n=0;n<t.length;n++){var o=t[n],r=a[o.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](o.parts[i]);for(;i<o.parts.length;i++)r.parts.push(b(o.parts[i],e))}else{var s=[];for(i=0;i<o.parts.length;i++)s.push(b(o.parts[i],e));a[o.id]={id:o.id,refs:1,parts:s}}}}function h(t,e){for(var n=[],o={},r=0;r<t.length;r++){var i=t[r],a=e.base?i[0]+e.base:i[0];i={css:i[1],media:i[2],sourceMap:i[3]};o[a]?o[a].parts.push(i):n.push(o[a]={id:a,parts:[i]})}return n}function m(t,e){var n=l(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=d[d.length-1];if("top"===t.insertAt)o?o.nextSibling?n.insertBefore(e,o.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),d.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");t=l(t.insertAt.before,n),n.insertBefore(e,t)}}function v(t){null!==t.parentNode&&(t.parentNode.removeChild(t),0<=(t=d.indexOf(t))&&d.splice(t,1))}function y(t){var e,o=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0!==t.attrs.nonce||(e=n.nc)&&(t.attrs.nonce=e),g(o,t.attrs),m(t,o),o}function g(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function b(t,e){var n,o,r,i,a;if(e.transform&&t.css){if(!(i="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=i}return r=e.singleton?(a=u++,n=c=c||y(e),o=$.bind(null,n,a,!1),$.bind(null,n,a,!0)):t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=e,a=document.createElement("link"),void 0===i.attrs.type&&(i.attrs.type="text/css"),i.attrs.rel="stylesheet",g(a,i.attrs),m(i,a),o=function(t,e,n){var o=n.css,r=n.sourceMap;n=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||n)&&(o=f(o)),r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),r=new Blob([o],{type:"text/css"}),o=t.href,t.href=URL.createObjectURL(r),o&&URL.revokeObjectURL(o)}.bind(null,n=a,e),function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=y(e),o=function(t,e){var n=e.css;if((e=e.media)&&t.setAttribute("media",e),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),function(){v(n)}),o(t),function(e){e?e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap||o(t=e):r()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=h(t,e);return p(n,e),function(t){for(var o=[],r=0;r<n.length;r++){var i=n[r];(s=a[i.id]).refs--,o.push(s)}t&&p(h(t,e),e);var s;for(r=0;r<o.length;r++)if(0===(s=o[r]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete a[s.id]}}};var _,C=(_=[],function(t,e){return _[t]=e,_.filter(Boolean).join("\n")});function $(t,e,n,o){n=n?"":o.css,t.styleSheet?t.styleSheet.cssText=C(e,n):(o=document.createTextNode(n),(n=t.childNodes)[e]&&t.removeChild(n[e]),n.length?t.insertBefore(o,n[e]):t.appendChild(o))}},134:function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,o=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){return e=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e})),/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(e)?t:(e=0===e.indexOf("//")?e:0===e.indexOf("/")?n+e:o+e.replace(/^\.\//,""),"url("+JSON.stringify(e)+")")}))}}}]);